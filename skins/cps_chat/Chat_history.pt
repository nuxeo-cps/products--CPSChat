<metal:block use-macro="here/content_lib/macros/master"
             i18n:domain="cpschat">
  <metal:header metal:fill-slot="header">
    <h1 i18n:translate="">
        Chat History of
        <strong>
          <span i18n:name="chat_id" tal:content="here/Title" />
        </strong>
        with :
        <strong>
          <span i18n:name="chat_host" tal:content="here/host" />
        </strong>
    </h1>
  </metal:header>
  <metal:block fill-slot="main">
    <script language="javascript">
    <!--
      function open_external_window() {
        window.open('Chat_index', 'Chat', 'toolbar=0, scrollbars=0, location=0, statusb ar=0, menubar=0, resizable=1, dependent=1, width=800, height=500')
       }
    //->
    </script>
    <br />
    <tal:block define="questions python:here.selectQuestions(status='ANSWERED')">
      <tal:block condition="questions">
        <table align="center" width="100%" cellspacing="2" cellpadding="1">
          <tr bgcolor="#FF0000">
            <td align="center"><strong><span i18n:translate="label_date">Date</span></strong></td>
            <td align="center"><strong><span i18n:translate="label_from">From</span></strong></td>
            <td align="center">
               <strong>
                <span i18n:translate="label_chat_question">Question</span>
               </strong>
            </td>
          </tr>
          <tr bgcolor="#FFFFFF">
             <td colspan="3" >
               &nbsp;
             </td>
           </tr>
        <tal:block repeat="question questions">
           <tr bgcolor="#DDDDDD">
             <td>
             <span
             tal:replace="python:here.getDateStr(question.submit_time(),
             'short')" />
             </td>
             <td>
               <span tal:replace="question/pseudo" />
            </td>
            <td>
              <span tal:replace="question/question" />
            </td>
           </tr>
           <tr>
            <td colspan="2" align="center" bgcolor="#EEEEEE">
              <strong>
                <span i18n:translate="label_chat_answer">
                  Answer
                </span>
              </strong>
            </td>
            <td>
              <i>
                <span tal:replace="question/answer" />
              </i>
            </td>
           </tr>
           <tr bgcolor="#FFFFFF">
             <td colspan="3" >
               &nbsp;
             </td>
           </tr>
        </tal:block>
        </table>
      </tal:block>
      <tal:block condition="not:questions">
        <span i18n:translate="chat_empty_history">The chat is currently empty.</span>
      </tal:block>
    </tal:block>
   </metal:block>
</metal:block>
