<metal:block use-macro="here/content_lib/macros/master"
             i18n:domain="cpschat">
  <metal:block metal:fill-slot="header">
    <h1 i18n:translate="chat_add_answer_heading">
        Answer this question.
    </h1>
  </metal:block>

  <metal:block fill-slot="main">
    <script language="javascript">
  <!--
    function open_external_window() {
      window.open('Chat_index', 'Chat', 'toolbar=0, scrollbars=0, location=0, statusb ar=0, menubar=0, resizable=1, dependent=1, width=800, height=800')
     }
  //-->
  </script>
  <br />
  <div align="center">
     [
     <a tal:attributes="href
       string:${here/absolute_url}/Chat_moderateForm">
       <span i18n:translate="label_refresh">Refresh for the latest ones</span>
     </a>
     |
     <a tal:attributes="href
       string:${here/absolute_url}/Chat_addAnswerForm">
       <span i18n:translate="label_answer">Answer the pending questions</span>
     </a>
     ]
  </div>
  <br />

  <tal:block tal:define="id_question python:request.get('id_question', None)">
    <tal:block tal:condition="python:id_question is not None"
               tal:define="global l python:[here.getQuestion(int(id_question))]" >

    <strong>
      <span i18n:translate="label_question_form">Question from :</span>
    </strong>
    <em tal:content="python: l[0].pseudo()">pseudo</em>

    <table align="center" width="100%" bgcolor="#EEEEEE">
      <tr>
        <td>
          <tal:block tal:replace="python: l[0].question()" />
       </td>
      </tr>
    </table>

  <strong>
    <span i18n:translate="label_your_answer">
      Your answer :
    </span>
  </strong>

  <form action="Chat_add_reply">
    <input type="hidden" name="id_question"
      tal:attributes="value python:l[0].id()">
    <textarea cols="60" rows="27" name="answer"></textarea>
    <br>
    <input type="submit" value="button_submit"
           i18n:attributes="value" />
  </form>

  </tal:block>
 </tal:block>

  <tal:block tal:condition="python: not len(l)">
    <span i18n:translate="label_no_pending_questions">
      No question with a pending state.
    </span>
  </tal:block>

  </metal:block>
</metal:block>
